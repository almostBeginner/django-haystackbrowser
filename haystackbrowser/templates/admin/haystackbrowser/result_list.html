{% extends "admin/change_list.html" %}
{% load i18n %}
{% if not is_popup %}
  {% block breadcrumbs %}
    <div class="breadcrumbs">
      <a href="../../">
        {% trans "Home" %}
      </a>
       &rsaquo;
       <a href="../">
         {{ app_label|capfirst }}
      </a>
      &rsaquo;
      {{ module_name|capfirst }}
    </div>
  {% endblock %}
{% endif %}

{% block content %}
<div id="content-main">
    <div class="module {% if filtered %}filtered{% endif %}" id="changelist">
            {% block search %}{% endblock search %}

        {% block filters %}
        <div id="changelist-filter">
            <h2>{% trans "Filter" %}</h2>

            <h3>{% trans "Contains" %}</h3>
            <form id="changelist-search" action="" method="get">

            <div style="padding-left: 10px;">
                {{ form.q }}
                <input type="submit" value="{% trans 'Search' %}" />
            </div>
            <script type="text/javascript">document.getElementById("{{ form.q.id_for_label }}").focus();</script>

            <h3>{% trans "Only models" %}</h3>
            {{ form.models }}

            {% for key, val in params.items %}
                {% if key != search_var and key != page_var  and key not in form.models.initial %}
                <input type="hidden" name="{{ key }}" value="{{ val }}">
                {% endif %}
            {% endfor %}
            </form>
            <div style="padding-left: 10px;">{% if request.GET.models %}<span class="small quiet"><a href="{{ request.path_info }}">clear filters</a></span>{% endif %}</div>
            </div>
        {% endblock filters %}

        {% block result_list %}
        {% if results %}
        <div class="results">
        <table cellspacing="0" id="result_list">
            <thead>
                <tr>
                    {% include "admin/haystackbrowser/result_list_headers.html" with filtered=filtered only %}
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                <tr class="{% cycle 'row1' 'row2' %}">
                    {% include "admin/haystackbrowser/result.html" with result=result filtered=filtered request=request only %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
        </div>
        {% endif %}
        {% endblock result_list %}

        {% block pagination %}
        <p class="paginator">
        {% if pagination_required %}
            {% for i in page_range %}
            {% if i == page_num %}
            <span class="this-page">{{ i }}</span>
            {% else %}
            <a href="{{ query_string }}&p={{ i }}" {% if forloop.last %}class="end"{% endif %}>{{ i }}</a>
            {% endif %}
            {% endfor %}
        {% endif %}
        {{ result_count }} {% ifequal result_count 1 %}{{ opts.verbose_name }}{% else %}{{ opts.verbose_name_plural }}{% endifequal %}
        </p>
        {% endblock pagination %}
    </div>
</div>
{% endblock content %}
